<!DOCTYPE html>
<html lang="sw">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Malkia Vumilia Kajela | 2026</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:ital,wght@0,400;0,700;1,400&family=Montserrat:wght@200;400;600;800&display=swap" rel="stylesheet">
    
    <style>
        :root { --gold: #bf953f; --light-gold: #fcf6ba; --deep-gold: #aa771c; }
        body { font-family: 'Montserrat', sans-serif; scroll-behavior: smooth; background: #000; overflow-x: hidden; color: white; }
        .serif { font-family: 'Playfair Display', serif; }
        
        /* ANIMATION ENGINE */
        .festival-particle {
            position: fixed; top: -50px; user-select: none; pointer-events: none; z-index: 50;
            animation: fall linear forwards;
        }
        @keyframes fall {
            0% { transform: translateY(0) rotate(0deg); opacity: 0; }
            10% { opacity: 1; }
            90% { opacity: 1; }
            100% { transform: translateY(110vh) rotate(360deg); opacity: 0; }
        }

        .stars { position: fixed; top: 0; left: 0; width: 100%; height: 100%; pointer-events: none; z-index: 1; }
        .star { position: absolute; background: white; border-radius: 50%; animation: twinkle 3s infinite; }
        @keyframes twinkle { 0%, 100% { opacity: 0.3; } 50% { opacity: 1; } }

        .gold-gradient {
            background: linear-gradient(135deg, #bf953f, #fcf6ba, #b38728, #aa771c);
            -webkit-background-clip: text; -webkit-text-fill-color: transparent;
            background-size: 300% auto; animation: shine 5s linear infinite;
        }
        @keyframes shine { to { background-position: 300% center; } }

        .glass { background: rgba(15, 15, 15, 0.7); backdrop-filter: blur(25px); border: 1px solid rgba(191, 149, 63, 0.2); }
        .floating { animation: float 6s ease-in-out infinite; }
        @keyframes float { 0%, 100% { transform: translateY(0px); } 50% { transform: translateY(-20px); } }

        .scene-indicator {
            position: fixed; top: 20px; left: 20px; z-index: 100;
            background: rgba(0,0,0,0.6); padding: 8px 15px; border-radius: 20px;
            font-size: 10px; border: 1px solid rgba(191, 149, 63, 0.3); color: #fbbf24;
            text-transform: uppercase; letter-spacing: 1px; font-weight: bold;
        }

        .input-style { background: rgba(255,255,255,0.05); border: 1px solid rgba(191, 149, 63, 0.3); color: white; border-radius: 15px; padding: 12px; outline: none; width: 100%; }
        .message-card { animation: slideIn 0.8s ease-out forwards; position: relative; }
        @keyframes slideIn { from { opacity: 0; transform: translateY(20px); } to { opacity: 1; transform: translateY(0); } }

        /* Like Button Pulse */
        .btn-love { transition: all 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275); }
        .btn-love:active { transform: scale(0.8); }
    </style>
</head>
<body>

    <div class="scene-indicator" id="currentScene">Mode: Royal Gold ‚ú®</div>
    <div class="stars" id="stars"></div>

    <audio id="bgMusic" loop>
        <source src="https://files.catbox.moe/pqvart.mp3" type="audio/mpeg">
    </audio>

    <div class="fixed bottom-8 right-8 z-[100] flex flex-col gap-4">
        <button onclick="sendLove()" class="btn-love glass p-5 rounded-full text-2xl border-red-500/40 shadow-[0_0_20px_rgba(239,68,68,0.3)]">‚ù§Ô∏è</button>
        <button onclick="openShareModal()" class="glass p-5 rounded-full text-2xl border-amber-500/40">üì§</button>
        <button id="music-btn" onclick="toggleMusic()" class="hidden glass p-5 rounded-full text-2xl border-amber-500/40">‚è∏</button>
    </div>

    <section class="relative min-h-screen flex items-center justify-center py-12 px-4 z-10">
        <div class="max-w-5xl w-full text-center">
            <p class="uppercase tracking-[0.7em] text-amber-400 text-[10px] mb-10 font-bold">Tarehe 31 Desemba | Sherehe ya Maisha</p>
            
            <div class="mb-14 relative inline-block floating">
                <div class="absolute -inset-10 bg-amber-500/20 rounded-full blur-3xl opacity-40"></div>
                <img src="mama.jpg" alt="Vumilia Kajela" class="relative w-64 h-64 md:w-80 md:h-80 object-cover rounded-full border-4 border-amber-500/40 shadow-2xl">
            </div>

            <h1 class="serif text-5xl md:text-[8rem] mb-8 leading-none">
                <span class="text-white/90">Malkia</span> <br>
                <span class="gold-gradient font-bold italic">Vumilia Kajela</span>
            </h1>

            <div id="timer" class="flex justify-center gap-4 mb-16">
                <div class="glass px-6 py-4 rounded-2xl min-w-[90px]">
                    <span id="days" class="block text-3xl font-bold text-amber-400">00</span>
                    <span class="text-[10px] uppercase text-gray-400">Siku</span>
                </div>
                <div class="glass px-6 py-4 rounded-2xl min-w-[90px]">
                    <span id="hours" class="block text-3xl font-bold text-amber-400">00</span>
                    <span class="text-[10px] uppercase text-gray-400">Saa</span>
                </div>
                <div class="glass px-6 py-4 rounded-2xl min-w-[90px]">
                    <span id="minutes" class="block text-3xl font-bold text-amber-400">00</span>
                    <span class="text-[10px] uppercase text-gray-400">Dak</span>
                </div>
            </div>

            <button onclick="startCelebration()" id="startBtn" class="px-12 py-6 border-2 border-amber-500/50 rounded-full hover:bg-amber-600 hover:text-black transition-all font-bold tracking-widest text-xs uppercase">Fungua Zawadi ya Mama üéÅ</button>
        </div>
    </section>

    <div id="surprise-content" class="hidden">
        
        <section class="py-20 px-6 relative z-10">
            <div class="max-w-4xl mx-auto glass p-10 md:p-20 rounded-[3rem] text-center shadow-2xl border-amber-500/30">
                <h2 class="serif text-4xl md:text-5xl mb-12 gold-gradient italic font-bold">Heri ya Siku ya Kuzaliwa, Mama! üéÇ</h2>
                
                <p class="text-xl md:text-3xl leading-relaxed text-white/95 serif italic mb-12">
                    "Leo ni siku yako ya kipekee, siku ambayo ulimwengu ulibarikiwa kwa zawadi ya maisha yako. 
                    Tunasherehekea <span class="text-amber-300">upendo wako, hekima yako, na tabasamu lako</span> 
                    linaloangaza maisha yetu kila siku. 
                    <br><br>
                    Unapohitimu mwaka mwingine leo tarehe 31 Desemba, tunakuombea baraka tele na afya njema. 
                    Wewe ni <span class="gold-gradient font-bold underline decoration-amber-500/30">Malkia wetu wa thamani</span>. 
                    Na kisha, saa itakapogonga usiku wa manane, basi mwaka mpya wa 2026 na uanze kwa kishindo cha furaha kwako!"
                </p>
                
                <div class="flex flex-col items-center gap-4">
                    <p class="text-amber-500 text-xs tracking-widest uppercase font-bold">Tunakupenda Daima,</p>
                    <p class="serif text-4xl gold-gradient font-bold italic">Familia Yako</p>
                </div>
            </div>
        </section>

        <section class="py-20 px-6 relative z-10 bg-black/40">
            <div class="max-w-2xl mx-auto">
                
                <div class="grid grid-cols-2 gap-6 mb-12">
                    <div class="glass p-6 rounded-2xl text-center border-red-500/20">
                        <div class="text-3xl font-bold text-red-400" id="totalLoves">0</div>
                        <div class="text-[8px] uppercase tracking-widest text-gray-400">Upendo Jumla (Loves)</div>
                    </div>
                    <div class="glass p-6 rounded-2xl text-center border-amber-500/20">
                        <div class="text-3xl font-bold text-amber-400" id="totalComments">0</div>
                        <div class="text-[8px] uppercase tracking-widest text-gray-400">Ujumbe wa Baraka</div>
                    </div>
                </div>

                <div class="text-center mb-12">
                    <h3 class="serif text-3xl gold-gradient font-bold">Baraka za Ndugu na Rafiki</h3>
                    <p class="text-gray-400 text-sm italic">Ujumbe wako utabaki hapa milele kwa ajili ya Mama</p>
                </div>

                <div class="glass p-8 rounded-3xl mb-12">
                    <div class="space-y-4">
                        <input type="text" id="guestName" placeholder="Jina lako" class="input-style">
                        <textarea id="guestMsg" placeholder="Andika baraka zako hapa..." class="input-style h-32"></textarea>
                        <select id="guestBadge" class="input-style">
                            <option value="Familia">üë®‚Äçüë©‚Äçüëß Familia</option>
                            <option value="VIP">‚≠ê VIP Guest</option>
                            <option value="Rafiki">üíô Rafiki</option>
                        </select>
                        <button onclick="addComment()" class="w-full py-4 bg-amber-600 text-black font-black rounded-xl hover:bg-amber-400 transition tracking-widest uppercase text-xs">TUMA BARAKA ‚ù§Ô∏è</button>
                    </div>
                </div>

                <div id="commentWall" class="space-y-6">
                    <div class="text-center text-gray-500 py-10">Inapakia ujumbe wa baraka...</div>
                </div>
            </div>
        </section>

        <footer class="py-10 text-center opacity-30 text-[9px] tracking-widest">
            &copy; 2026 VUMILIA KAJELA - THE ROYAL BIRTHDAY
        </footer>
    </div>

    <div id="shareModal" class="hidden fixed inset-0 z-[200] bg-black/95 flex items-center justify-center p-6 backdrop-blur-xl">
        <div class="glass rounded-[2rem] max-w-md w-full p-10 text-center relative border-amber-500/20">
            <button onclick="closeShareModal()" class="absolute top-6 right-6 text-2xl text-amber-500">&times;</button>
            <h3 class="serif text-3xl mb-8 gold-gradient font-bold">Shiriki Furaha</h3>
            <button onclick="copyLink()" class="w-full py-5 bg-white/5 border border-amber-500/30 rounded-2xl font-bold mb-4">üîó <span id="copyTxt">Nakili Link ya Ukurasa</span></button>
            <a href="https://wa.me/?text=Mtembelee%20Malkia%20Vumilia%20Kajela%20katika%20siku%20yake%20ya%20kuzaliwa!" target="_blank" class="block w-full py-5 bg-green-600/20 border border-green-500/30 rounded-2xl font-bold">üì± WhatsApp</a>
        </div>
    </div>

    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";
        import { getDatabase, ref, push, onValue, runTransaction } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-database.js";

        const firebaseConfig = {
            apiKey: "AIzaSyBZTPJ4cVUhx68FilUgrr0d5LdAaf2SvjQ",
            authDomain: "mama2026-5adee.firebaseapp.com",
            databaseURL: "https://mama2026-5adee-default-rtdb.firebaseio.com",
            projectId: "mama2026-5adee",
            storageBucket: "mama2026-5adee.firebasestorage.app",
            messagingSenderId: "895540897740",
            appId: "1:895540897740:web:55410a28da4fc94d221f69"
        };

        const app = initializeApp(firebaseConfig);
        const db = getDatabase(app);
        const messagesRef = ref(db, 'messages');
        const likesRef = ref(db, 'likes_count');

        // Send Love function
        window.sendLove = function() {
            runTransaction(likesRef, (currentValue) => {
                return (currentValue || 0) + 1;
            });
            confetti({
                particleCount: 15,
                spread: 30,
                origin: { x: 0.9, y: 0.9 },
                colors: ['#ff0000', '#ff69b4'],
                shapes: ['circle']
            });
        };

        // Listen for Likes
        onValue(likesRef, (snapshot) => {
            document.getElementById('totalLoves').innerText = snapshot.val() || 0;
        });

        window.addComment = function() {
            const name = document.getElementById('guestName').value;
            const msg = document.getElementById('guestMsg').value;
            const badge = document.getElementById('guestBadge').value;
            if(name && msg) {
                push(messagesRef, {
                    name, message: msg, badge, timestamp: Date.now()
                }).then(() => {
                    document.getElementById('guestName').value = '';
                    document.getElementById('guestMsg').value = '';
                    confetti({ particleCount: 100, origin: { y: 0.7 } });
                });
            }
        };

        onValue(messagesRef, (snapshot) => {
            const wall = document.getElementById('commentWall');
            const data = snapshot.val();
            wall.innerHTML = '';
            if(data) {
                const msgs = Object.values(data).sort((a,b) => b.timestamp - a.timestamp);
                msgs.forEach(m => {
                    const div = document.createElement('div');
                    div.className = "glass p-6 rounded-2xl border-l-4 border-amber-500 message-card mb-4";
                    div.innerHTML = `
                        <div class="flex items-center gap-2 mb-2">
                            <p class="text-amber-400 font-bold text-sm">${m.name}</p>
                            <span class="bg-amber-500/10 text-amber-500 px-2 py-0.5 rounded-full text-[8px] font-bold uppercase border border-amber-500/20">${m.badge}</span>
                        </div>
                        <p class="text-gray-300 italic">"${m.message}"</p>
                    `;
                    wall.appendChild(div);
                });
                document.getElementById('totalComments').innerText = msgs.length;
            } else {
                wall.innerHTML = '<div class="text-center text-gray-500">Kuwa wa kwanza kutuma baraka!</div>';
            }
        });
    </script>

    <script>
        const scenes = [
            { name: "Royal Gold ‚ú®", icons: ['üëë', '‚ú®', 'üíé', '‚ú®'] },
            { name: "Birthday Joy üéÇ", icons: ['üéÇ', 'üéÅ', 'üéà', '‚ú®'] },
            { name: "Love ‚ù§Ô∏è", icons: ['‚ù§Ô∏è', 'üíñ', 'üå∏', 'üíñ'] }
        ];
        
        let currentSceneIndex = 0;
        function createParticle() {
            const p = document.createElement('div');
            p.className = 'festival-particle';
            p.innerText = scenes[currentSceneIndex].icons[Math.floor(Math.random() * 4)];
            p.style.left = Math.random() * 100 + 'vw';
            p.style.fontSize = (Math.random() * 15 + 15) + 'px';
            const duration = Math.random() * 3 + 5;
            p.style.animationDuration = duration + 's';
            document.body.appendChild(p);
            setTimeout(() => p.remove(), duration * 1000);
        }
        setInterval(createParticle, 400);

        function startCelebration() {
            document.getElementById('bgMusic').play().catch(()=>{});
            document.getElementById('music-btn').classList.remove('hidden');
            document.getElementById('surprise-content').classList.remove('hidden');
            document.getElementById('startBtn').style.display = 'none';
            confetti({ particleCount: 150, spread: 70, origin: { y: 0.6 } });
            window.scrollTo({ top: window.innerHeight, behavior: 'smooth' });
        }

        function toggleMusic() {
            const m = document.getElementById('bgMusic');
            if(m.paused) { m.play(); document.getElementById('music-btn').innerText = "‚è∏"; }
            else { m.pause(); document.getElementById('music-btn').innerText = "‚ñ∂Ô∏è"; }
        }

        function openShareModal() { document.getElementById('shareModal').classList.remove('hidden'); }
        function closeShareModal() { document.getElementById('shareModal').classList.add('hidden'); }
        function copyLink() {
            navigator.clipboard.writeText(window.location.href);
            document.getElementById('copyTxt').innerText = "‚úì Imenakiliwa!";
            setTimeout(()=> document.getElementById('copyTxt').innerText = "Nakili Link ya Ukurasa", 2000);
        }

        const target = new Date("January 1, 2026 00:00:00").getTime();
        setInterval(() => {
            const d = target - new Date().getTime();
            if(d<0) return;
            document.getElementById('days').innerText = String(Math.floor(d/86400000)).padStart(2,'0');
            document.getElementById('hours').innerText = String(Math.floor((d%86400000)/3600000)).padStart(2,'0');
            document.getElementById('minutes').innerText = String(Math.floor((d%3600000)/60000)).padStart(2,'0');
        }, 1000);

        const stars = document.getElementById('stars');
        for (let i = 0; i < 80; i++) {
            const s = document.createElement('div');
            s.className = 'star';
            s.style.width = '2px'; s.style.height = '2px';
            s.style.left = Math.random() * 100 + '%';
            s.style.top = Math.random() * 100 + '%';
            s.style.animationDelay = Math.random() * 3 + 's';
            stars.appendChild(s);
        }
    </script>
</body>
</html>